.TH raw_snd 1W "2019.9.5" "WIN SYSTEM" "WIN SYSTEM"
.SH 名称
raw_shift - RAW 形式データを任意ビット数右シフト
.SH 形式
raw_shift
[
.I \-s 4|5|5f
]
.I inkey
.I outkey
.I shmsize
.I bits
[
.I chfile
[
.I logfile
]]
.LP
.SH 解説
raw_shift は、キー
.I \ inkey
の共有メモリ・セグメントに巡回的に書き込まれている
win 形式のデータを読み込み、全チャネルの全サンプルを
.I \ bits
ビットだけ右シフトして、
キー
.I \ outkey
で与えられる共有メモリ・セグメントに書き出します。
ただしチャネルファイル
.I \ chfile
が与えられた場合は、その中にリストされたチャネルのデータだけが
シフトして書き出され、それ以外のチャネルは無視されます。
またチャネルファイル名の先頭に '\+' を付けたときは、
そのファイルにリストされたチャネルがシフトして書き出され、
それ以外のチャネルはそのまま出力にコピーされます。
さらにチャネルファイル名の先頭に '\-' を付けたときは、
そのファイルにリストされたチャネルはそのまま出力にコピーされ、
それ以外のすべてのチャネルはシフトして書き出されます。
キー
.I \ outkey
をもつ共有メモリ・セグメントが存在しない場合は、大きさ
.I \ shmsize
\ (KB) の共有メモリ・セグメントが作られます。すでに存在している場合は、
そのサイズが
.I \ shmsize
\ (KB) よりも小さいとエラーになります。
共有メモリ・キーは32ビットの整数値です。
.LP
ログファイル名
.I \ logfile
を指定すると、ここに動作ログがとられ、
指定しないとログ情報は標準出力に
送られます。ログファイルは書き込みのたび毎に
オープン／クローズされます。
.LP
チャネルファイルは、１行に１つずつ、16進数でチャネル番号を書
き並べたテキストファイルです。各行の先頭の項目だけが読まれ、
空白またはタブで区切られた以降の項目は無視されます。また先頭
が '#' である行も無視されます。
raw_shift プロセスは
ハングアップシグナルを受け取ると、チャネルファイルを読み直します。
.LP
共有メモリ
.I inkey
上の形式は、時間順整列されたもの(order(1W)参照)
でもされていないもの(recvt(1W)参照)
でもかまいません。共有メモリ
.I outkey
の形式は
.I inkey
と同じになります。
.LP
raw_shift は、引数なしで起動すると簡単な使用法を表示します。
.LP
.SH オプション
.TP
.IP "\fB\-s \fImode" 5
書き込みデータのサンプルサイズが
.I 4 バイト
の場合のサンプルサイズ情報のモードを指定します。
.nf
4 : サンプルサイズ情報を 4 にします。
5 : サンプルサイズ情報を 5 にします。
5f : サンプルサイズが 4 バイト長以外についてもサンプルサイズ情報を 5
     にします。つまり、常に圧縮の無い固定長データとなります。
.SH ソース
.TP
`raw_shift.c'
.SH 関連事項
winformat(1W), order(1W), recvt(1W)
