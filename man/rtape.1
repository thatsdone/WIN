.TH rtape 1W "2000.12.21" "WIN SYSTEM" "WIN SYSTEM"
.SH 名称
rtape - テープ上の win 形式データからディスク上にファイルを切り出す
.SH 形式
rtape [ \-f
.I device
]
.I schfile
.I outdir
[
.I chfile
]
.LP
.SH 解説
rtape は、wtape(1W) が書き込んだ WIN 形式データのテープを
読み、時間予定表ファイル
.I schfile
に従い、チャネルリストファイル
.I chfile
に指定されたチャネルのデータを切り出して、
１つまたは複数のWIN形式波形ファイルをディレクトリ
.I outdir
に生成します。
.LP
.I schfile
は、１行に１イベント分ずつ、切り出し開始時刻と切り出す秒数を書いた
もので、必要なイベント数(＝行数)を含みます。イベント数に制限はありません。
各行の内容は、年月日(6桁)、時分秒(6桁)、長さの秒数(整数)
の３項目を、それぞれ空白で区切って書いたものです。たとえば、
.IP
.nf
920724 030830 50
920724 035750 60
.fi
.LP
は 1992年 7月24日 3時8分30秒から50秒間と、1992年 7月24日 3時57分50秒から
60秒間の、２つのファイルを作ります。ファイル名は先頭時刻から
"YYMMDD.hhmmss" の形式で自動的に生成されますので、上の例では
"920724.030830" と "920724.035750" というファイル名になります。
.LP
.I chfile
は、16進数のチャネル番号を空白、タブまたは改行で区切って羅列した
ものです。通常のWINのチャネル表形式とは異なることに注意して
ください。すべての項目がチャネル番号として読まれ、
行の先頭に "#" があってもコメントとは見なされません。
.I chfile
を指定しない場合は、テープに含まれるすべてのチャネルが切り出されます。
.LP
.I outdir
を指定しない場合は、出力ファイルはカレントディレクトリに
作られます。
.LP
rtape は次の指定されたイベントの先頭時刻まで、テープ上に
10分毎に入っているファイルマーク数および1秒毎のデータブロックの数
を計算し、必要に応じて正逆両方向に読み飛ばし(可能ならば早送り)します。
ただし、
データブロックが欠落していたり、1秒のデータが複数のブロックに分割されて
いる場合には計算が合わなくなって、テープ上の狙った時刻へ位置付け
できないこともあります。rtape は10回位置付けを試みても指定された
時刻を発見できなかった場合は、そのイベントの切り出しをあきらめます。
.LP
rtape は引数なしで起動した場合、現在のテープの位置から１秒分を
読み出して、その時刻を表示し、また簡単な使用法を表示します。
.LP
テープ上のフォーマットとOSによる互換性については、
winformat(1W) と wdisk(1W) を参照してください。
.SH オプション
.TP
.RI \-f " device"
テープデバイス名を指定します。デフォールトは /dev/nrst0 です。
クローズ時に巻戻さないモード（/dev/nrst*）である必要があります。
.SH ソース 
.TP
`rtape.c'
.SH 関連事項
winformat(1W), wtape(1W), fromtape(1W)
