.TH sends 1W "2000.12.20" "WIN SYSTEM" "WIN SYSTEM"
.SH 名称
sends - 共有メモリからシリアルポートへデータを送信
.SH 形式
sends [\-ad] [\-i my_ID] [\-p port] [-b rate]
.I shmkey
.I device
[
.I logfile
]
.LP
.SH 解説
recvs は、キー
.I \ shmkey
で指定された共有メモリ・セグメントに（巡回的に）書き込まれている
WIN形式のデータを、デバイス名 device のシリアルポートから、
HDLCフレームで出力します。
sends がサポートしているシリアルポートのデバイスは、Solarisのzshデバイス
(/dev/zsh?) およびSolaris上のAurora Technologies社製マルチポート同期
シリアルボードの /dev/hdlcdrv/? デバイスです。
.LP
ログファイル名
.I \ logfile
を指定すると、ここに動作ログがとられ、指定しないとログ情報は標準出力に
送られます。ログファイルは書き込みのたび毎にオープン／クローズされます。
.LP
sends は引数なしで起動すると簡単な使用法を表示します。
.SH 共有メモリ上の形式
recvt(1W) を参照してください。ただし、実際に sends が識別する
のは
.nf

    (1)４バイトのブロックサイズ（バイト）
    (2)４バイトの「書き込み時刻」
    (3)データ

.fi
だけであり、「(3)データ」の内容は何でもかまいません。ただし
１ブロックが１パケットとして送信されるので、１パケットの長さは
1472バイト以下である必要があります。
.SH シリアル回線上のデータ形式
recvs(1W) を参照してください。ただし、実際に sends が関与するのは
.nf

    (1)２バイトの送信局アドレス
    (2)１バイトのパケット番号(0〜255)
    (3)１バイトの「元の」パケット番号(0〜255)
    (4)データ

.fi
であり、「(4)データ」の内容は共有メモリ中のブロックのデータ部分が
そのままコピーされます。
.SH 再送プロトコル
recvs(1W) を参照してください。
sends はHDLCデータを送信しているシリアルポートか、
または指定されたUDPポートで再送要求を受け付け、過去最大128パケットまで遡った
再送要求に応えます。
.SH オプション
.TP
\-a
Aurora Technologies社製マルチポート同期シリアルボードを利用する。
これを指定しないと、Solarisの標準シリアルポートが使われます。
.TP
\-d
すべての送信パケットを２個ずつ送ります。これは無線等の単方向回線で、
回線速度は速いが再送要求が使えない場合に、データの欠落を減らすために
使用されます。
.TP
\-p
再送要求パケットはUDPポート port で受け付けます。
デフォールトでは再送要求パケットをシリアル回線から受け付けます。
.TP
\-i
送信パケットにセットする、送信局アドレス my_ID (0〜65535)を10進数で
設定します。これを指定しないと、0 が使われます。
.TP
\-b
シリアル回線の内部送信クロックのビットレート rate (bps)を設定します。
これを指定しないと外部クロックが使われます。
.SH ソース
.TP 
`sends.c'
.SH 注意事項
現在のところ、sends は共有メモリ中のブロックサイズが送信可能な
長さかどうかのチェックをしていません。それを保証するためには、
とりあえず \-a オプション付きの recvt(1W) で受信したデータを
使うことをお勧めします。
.br
recvs は Solaris2.Xでのみテストされています。
.SH 関連事項
recvs(1W), recvt(1W), shmdump(1W)
